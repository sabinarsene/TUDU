{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport { useContext, useMemo, useRef } from 'react';\nimport { focusScope } from './scope';\nimport { mediumEffect } from './medium';\nimport { extractRef } from './util';\nvar collapseRefs = function collapseRefs(shards) {\n  return shards.map(extractRef).filter(Boolean);\n};\nvar withMedium = function withMedium(fn) {\n  return new Promise(function (resolve) {\n    return mediumEffect.useMedium(function () {\n      resolve(fn.apply(void 0, arguments));\n    });\n  });\n};\nexport var useFocusController = function useFocusController() {\n  for (var _len = arguments.length, shards = new Array(_len), _key = 0; _key < _len; _key++) {\n    shards[_key] = arguments[_key];\n  }\n  if (!shards.length) {\n    throw new Error('useFocusController requires at least one target element');\n  }\n  var ref = useRef(shards);\n  ref.current = shards;\n  return useMemo(function () {\n    return {\n      autoFocus: function autoFocus(focusOptions) {\n        if (focusOptions === void 0) {\n          focusOptions = {};\n        }\n        return withMedium(function (car) {\n          return car.moveFocusInside(collapseRefs(ref.current), null, focusOptions);\n        });\n      },\n      focusNext: function focusNext(options) {\n        return withMedium(function (car) {\n          car.moveFocusInside(collapseRefs(ref.current), null);\n          car.focusNextElement(document.activeElement, _extends({\n            scope: collapseRefs(ref.current)\n          }, options));\n        });\n      },\n      focusPrev: function focusPrev(options) {\n        return withMedium(function (car) {\n          car.moveFocusInside(collapseRefs(ref.current), null);\n          car.focusPrevElement(document.activeElement, _extends({\n            scope: collapseRefs(ref.current)\n          }, options));\n        });\n      },\n      focusFirst: function focusFirst(options) {\n        return withMedium(function (car) {\n          car.focusFirstElement(collapseRefs(ref.current), options);\n        });\n      },\n      focusLast: function focusLast(options) {\n        return withMedium(function (car) {\n          car.focusLastElement(collapseRefs(ref.current), options);\n        });\n      }\n    };\n  }, []);\n};\nexport var useFocusScope = function useFocusScope() {\n  var scope = useContext(focusScope);\n  if (!scope) {\n    throw new Error('FocusLock is required to operate with FocusScope');\n  }\n  return useFocusController.apply(void 0, [scope.observed].concat(scope.shards));\n};","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}