{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\sabin.arsene\\\\Desktop\\\\Tudu-app\\\\TUDU\\\\frontend\\\\src\\\\components\\\\Chat\\\\Chat.jsx\",\n  _s = $RefreshSig$();\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n// ... existing imports ...\n\nexport function Chat({\n  receiverId,\n  receiverName\n}) {\n  _s();\n  const [messages, setMessages] = useState([]);\n  const [newMessage, setNewMessage] = useState('');\n  const {\n    socket,\n    connected,\n    sendMessage\n  } = useSocket();\n  const messagesEndRef = useRef(null);\n  const scrollToBottom = () => {\n    var _messagesEndRef$curre;\n    (_messagesEndRef$curre = messagesEndRef.current) === null || _messagesEndRef$curre === void 0 ? void 0 : _messagesEndRef$curre.scrollIntoView({\n      behavior: \"smooth\"\n    });\n  };\n  useEffect(() => {\n    if (socket) {\n      socket.on('receive_message', data => {\n        setMessages(prev => [...prev, data]);\n      });\n    }\n  }, [socket]);\n  useEffect(() => {\n    scrollToBottom();\n  }, [messages]);\n  const handleSend = () => {\n    if (newMessage.trim()) {\n      sendMessage(receiverId, newMessage);\n      setMessages(prev => [...prev, {\n        senderId: localStorage.getItem('userId'),\n        message: newMessage,\n        timestamp: new Date()\n      }]);\n      setNewMessage('');\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(Box, {\n    w: \"100%\",\n    h: \"500px\",\n    borderWidth: \"1px\",\n    borderRadius: \"lg\",\n    children: /*#__PURE__*/_jsxDEV(VStack, {\n      h: \"100%\",\n      spacing: 4,\n      children: [/*#__PURE__*/_jsxDEV(Box, {\n        flex: \"1\",\n        w: \"100%\",\n        overflowY: \"auto\",\n        p: 4,\n        children: [messages.map((msg, idx) => /*#__PURE__*/_jsxDEV(Flex, {\n          justify: msg.senderId === localStorage.getItem('userId') ? 'flex-end' : 'flex-start',\n          mb: 2,\n          children: /*#__PURE__*/_jsxDEV(Box, {\n            bg: msg.senderId === localStorage.getItem('userId') ? 'blue.500' : 'gray.200',\n            color: msg.senderId === localStorage.getItem('userId') ? 'white' : 'black',\n            borderRadius: \"lg\",\n            px: 3,\n            py: 2,\n            maxW: \"70%\",\n            children: [/*#__PURE__*/_jsxDEV(Text, {\n              children: msg.message\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 55,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Text, {\n              fontSize: \"xs\",\n              opacity: 0.8,\n              children: new Date(msg.timestamp).toLocaleTimeString()\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 56,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 47,\n            columnNumber: 15\n          }, this)\n        }, idx, false, {\n          fileName: _jsxFileName,\n          lineNumber: 42,\n          columnNumber: 13\n        }, this)), /*#__PURE__*/_jsxDEV(\"div\", {\n          ref: messagesEndRef\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 40,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Flex, {\n        p: 4,\n        w: \"100%\",\n        children: [/*#__PURE__*/_jsxDEV(Input, {\n          value: newMessage,\n          onChange: e => setNewMessage(e.target.value),\n          placeholder: \"Type a message...\",\n          mr: 2,\n          onKeyPress: e => e.key === 'Enter' && handleSend()\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          onClick: handleSend,\n          colorScheme: \"blue\",\n          children: \"Send\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 38,\n    columnNumber: 5\n  }, this);\n}\n_s(Chat, \"W26lEM6FP7Z6nBojbgFPVBWvO9M=\", true);\n_c = Chat;\nvar _c;\n$RefreshReg$(_c, \"Chat\");","map":{"version":3,"names":["Chat","receiverId","receiverName","_s","messages","setMessages","useState","newMessage","setNewMessage","socket","connected","sendMessage","useSocket","messagesEndRef","useRef","scrollToBottom","_messagesEndRef$curre","current","scrollIntoView","behavior","useEffect","on","data","prev","handleSend","trim","senderId","localStorage","getItem","message","timestamp","Date","_jsxDEV","Box","w","h","borderWidth","borderRadius","children","VStack","spacing","flex","overflowY","p","map","msg","idx","Flex","justify","mb","bg","color","px","py","maxW","Text","fileName","_jsxFileName","lineNumber","columnNumber","fontSize","opacity","toLocaleTimeString","ref","Input","value","onChange","e","target","placeholder","mr","onKeyPress","key","Button","onClick","colorScheme","_c","$RefreshReg$"],"sources":["C:/Users/sabin.arsene/Desktop/Tudu-app/TUDU/frontend/src/components/Chat/Chat.jsx"],"sourcesContent":["// ... existing imports ...\r\n\r\nexport function Chat({ receiverId, receiverName }) {\r\n  const [messages, setMessages] = useState([]);\r\n  const [newMessage, setNewMessage] = useState('');\r\n  const { socket, connected, sendMessage } = useSocket();\r\n  const messagesEndRef = useRef(null);\r\n\r\n  const scrollToBottom = () => {\r\n    messagesEndRef.current?.scrollIntoView({ behavior: \"smooth\" });\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (socket) {\r\n      socket.on('receive_message', (data) => {\r\n        setMessages(prev => [...prev, data]);\r\n      });\r\n    }\r\n  }, [socket]);\r\n\r\n  useEffect(() => {\r\n    scrollToBottom();\r\n  }, [messages]);\r\n\r\n  const handleSend = () => {\r\n    if (newMessage.trim()) {\r\n      sendMessage(receiverId, newMessage);\r\n      setMessages(prev => [...prev, {\r\n        senderId: localStorage.getItem('userId'),\r\n        message: newMessage,\r\n        timestamp: new Date()\r\n      }]);\r\n      setNewMessage('');\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Box w=\"100%\" h=\"500px\" borderWidth=\"1px\" borderRadius=\"lg\">\r\n      <VStack h=\"100%\" spacing={4}>\r\n        <Box flex=\"1\" w=\"100%\" overflowY=\"auto\" p={4}>\r\n          {messages.map((msg, idx) => (\r\n            <Flex \r\n              key={idx} \r\n              justify={msg.senderId === localStorage.getItem('userId') ? 'flex-end' : 'flex-start'}\r\n              mb={2}\r\n            >\r\n              <Box\r\n                bg={msg.senderId === localStorage.getItem('userId') ? 'blue.500' : 'gray.200'}\r\n                color={msg.senderId === localStorage.getItem('userId') ? 'white' : 'black'}\r\n                borderRadius=\"lg\"\r\n                px={3}\r\n                py={2}\r\n                maxW=\"70%\"\r\n              >\r\n                <Text>{msg.message}</Text>\r\n                <Text fontSize=\"xs\" opacity={0.8}>\r\n                  {new Date(msg.timestamp).toLocaleTimeString()}\r\n                </Text>\r\n              </Box>\r\n            </Flex>\r\n          ))}\r\n          <div ref={messagesEndRef} />\r\n        </Box>\r\n        <Flex p={4} w=\"100%\">\r\n          <Input\r\n            value={newMessage}\r\n            onChange={(e) => setNewMessage(e.target.value)}\r\n            placeholder=\"Type a message...\"\r\n            mr={2}\r\n            onKeyPress={(e) => e.key === 'Enter' && handleSend()}\r\n          />\r\n          <Button onClick={handleSend} colorScheme=\"blue\">\r\n            Send\r\n          </Button>\r\n        </Flex>\r\n      </VStack>\r\n    </Box>\r\n  );\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}