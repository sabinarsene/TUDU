{"ast":null,"code":"\"use client\";\n\nvar _jsxFileName = \"C:\\\\Users\\\\sabin.arsene\\\\Desktop\\\\Tudu-app\\\\TUDU\\\\frontend\\\\src\\\\pages\\\\PostServicePage.jsx\",\n  _s = $RefreshSig$();\nimport { useState } from \"react\";\nimport { Link, useNavigate } from \"react-router-dom\";\nimport { ChevronLeft, Upload, X, Info } from \"lucide-react\";\nimport \"./PostServicePage.css\";\nimport { createService } from \"../services/serviceApi\";\nimport { useAuth } from \"../contexts/AuthContext\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst CATEGORIES = [\"Instalații\", \"Curățenie\", \"Mobilă\", \"Educație\", \"Transport\", \"Electrocasnice\", \"Grădinărit\", \"IT & Tech\", \"Design\", \"Construcții\", \"Sănătate\", \"Meditații\", \"Frumusețe\", \"Animale\", \"Auto\", \"Evenimente\"];\nconst PostServicePage = () => {\n  _s();\n  const navigate = useNavigate();\n  const {\n    user\n  } = useAuth();\n\n  // Verificăm dacă utilizatorul este autentificat\n  if (!user) {\n    navigate(\"/login\");\n  }\n  const [formData, setFormData] = useState({\n    title: \"\",\n    category: \"\",\n    price: \"\",\n    currency: \"RON\",\n    location: \"\",\n    description: \"\"\n  });\n  const [errors, setErrors] = useState({});\n  const [previewImages, setPreviewImages] = useState([]);\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const handleChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setFormData({\n      ...formData,\n      [name]: value\n    });\n\n    // Clear error when field is edited\n    if (errors[name]) {\n      setErrors({\n        ...errors,\n        [name]: null\n      });\n    }\n  };\n  const handleImageChange = e => {\n    const files = Array.from(e.target.files);\n    if (files.length + previewImages.length > 5) {\n      setErrors({\n        ...errors,\n        images: \"Poți încărca maximum 5 imagini\"\n      });\n      return;\n    }\n    const newPreviewImages = [...previewImages];\n    files.forEach(file => {\n      const reader = new FileReader();\n      reader.onload = e => {\n        newPreviewImages.push({\n          file,\n          preview: e.target.result\n        });\n        setPreviewImages([...newPreviewImages]);\n      };\n      reader.readAsDataURL(file);\n    });\n    setFormData({\n      ...formData,\n      images: [...(formData.images || []), ...files]\n    });\n\n    // Clear error when images are added\n    if (errors.images) {\n      setErrors({\n        ...errors,\n        images: null\n      });\n    }\n  };\n  const removeImage = index => {\n    const newPreviewImages = [...previewImages];\n    newPreviewImages.splice(index, 1);\n    setPreviewImages(newPreviewImages);\n\n    // Also remove from formData\n    const newImages = [...(formData.images || [])];\n    newImages.splice(index, 1);\n    setFormData({\n      ...formData,\n      images: newImages\n    });\n  };\n  const validateForm = () => {\n    const newErrors = {};\n    if (!formData.title.trim()) {\n      newErrors.title = \"Titlul este obligatoriu\";\n    } else if (formData.title.length < 5) {\n      newErrors.title = \"Titlul trebuie să aibă cel puțin 5 caractere\";\n    }\n    if (!formData.category) {\n      newErrors.category = \"Categoria este obligatorie\";\n    }\n    if (!formData.price) {\n      newErrors.price = \"Prețul este obligatoriu\";\n    } else if (isNaN(formData.price) || Number(formData.price) <= 0) {\n      newErrors.price = \"Prețul trebuie să fie un număr pozitiv\";\n    }\n    if (!formData.location.trim()) {\n      newErrors.location = \"Locația este obligatorie\";\n    }\n    if (!formData.description.trim()) {\n      newErrors.description = \"Descrierea este obligatorie\";\n    } else if (formData.description.length < 20) {\n      newErrors.description = \"Descrierea trebuie să aibă cel puțin 20 de caractere\";\n    }\n    if (!previewImages.length) {\n      newErrors.images = \"Trebuie să încarci cel puțin o imagine\";\n    }\n    setErrors(newErrors);\n    return Object.keys(newErrors).length === 0;\n  };\n  const handleSubmit = async e => {\n    e.preventDefault();\n    if (!validateForm()) {\n      // Scroll to the first error\n      const firstError = document.querySelector(\".error-message\");\n      if (firstError) {\n        firstError.scrollIntoView({\n          behavior: \"smooth\",\n          block: \"center\"\n        });\n      }\n      return;\n    }\n    setIsSubmitting(true);\n    setErrors({\n      ...errors,\n      submit: null\n    });\n    try {\n      // Get token from localStorage\n      const token = localStorage.getItem('token');\n      if (!token) {\n        throw new Error('Nu ești autentificat');\n      }\n\n      // Create FormData object for the API call\n      const serviceFormData = new FormData();\n      serviceFormData.append('title', formData.title);\n      serviceFormData.append('category', formData.category);\n      serviceFormData.append('price', formData.price);\n      serviceFormData.append('currency', formData.currency);\n      serviceFormData.append('location', formData.location);\n      serviceFormData.append('description', formData.description);\n\n      // Append image - only the first one since backend only supports one image\n      if (formData.images && formData.images.length > 0) {\n        serviceFormData.append('image', formData.images[0]);\n        console.log(\"Appending image:\", formData.images[0].name);\n      } else {\n        console.log(\"No image to append\");\n      }\n      console.log(\"Submitting service with data:\", {\n        title: formData.title,\n        category: formData.category,\n        price: formData.price,\n        hasImage: formData.images && formData.images.length > 0\n      });\n      try {\n        // Call the API to create the service\n        const response = await createService(serviceFormData, token);\n        console.log(\"Service created:\", response);\n\n        // Redirect to success page\n        navigate(\"/success?type=service\");\n      } catch (apiError) {\n        console.error(\"API error posting service:\", apiError);\n\n        // Verificăm dacă eroarea este legată de încărcarea imaginii\n        if (apiError.message && apiError.message.includes('image')) {\n          setErrors({\n            ...errors,\n            images: \"Eroare la încărcarea imaginii. Serviciul nu a putut fi creat.\",\n            submit: `Eroare: ${apiError.message}`\n          });\n        } else {\n          setErrors({\n            ...errors,\n            submit: `Eroare: ${apiError.message || 'A apărut o eroare la crearea serviciului. Te rugăm să încerci din nou.'}`\n          });\n        }\n\n        // Scroll to the top to show the error\n        window.scrollTo({\n          top: 0,\n          behavior: 'smooth'\n        });\n      }\n    } catch (error) {\n      console.error(\"Error posting service:\", error);\n\n      // Afișăm un mesaj de eroare mai specific dacă este disponibil\n      if (error.message) {\n        setErrors({\n          ...errors,\n          submit: `Eroare: ${error.message}`\n        });\n      } else {\n        setErrors({\n          ...errors,\n          submit: \"A apărut o eroare. Te rugăm să încerci din nou.\"\n        });\n      }\n\n      // Scroll to the top to show the error\n      window.scrollTo({\n        top: 0,\n        behavior: 'smooth'\n      });\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"post-service-page\",\n    children: [/*#__PURE__*/_jsxDEV(\"header\", {\n      className: \"page-header\",\n      children: [/*#__PURE__*/_jsxDEV(Link, {\n        to: \"/\",\n        className: \"back-button\",\n        children: /*#__PURE__*/_jsxDEV(ChevronLeft, {\n          size: 24\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 260,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 259,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"Adaug\\u0103 un serviciu nou\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 262,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 258,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      className: \"service-form\",\n      onSubmit: handleSubmit,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-section\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"title\",\n            children: \"Titlul serviciului *\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 268,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            id: \"title\",\n            name: \"title\",\n            value: formData.title,\n            onChange: handleChange,\n            placeholder: \"Ex: Repara\\u021Bii instala\\u021Bii sanitare\",\n            className: errors.title ? \"error\" : \"\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 269,\n            columnNumber: 13\n          }, this), errors.title && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"error-message\",\n            children: errors.title\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 278,\n            columnNumber: 30\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 267,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"category\",\n            children: \"Categoria *\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 282,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            id: \"category\",\n            name: \"category\",\n            value: formData.category,\n            onChange: handleChange,\n            className: errors.category ? \"error\" : \"\",\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"\",\n              children: \"Selecteaz\\u0103 o categorie\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 290,\n              columnNumber: 15\n            }, this), CATEGORIES.map(category => /*#__PURE__*/_jsxDEV(\"option\", {\n              value: category,\n              children: category\n            }, category, false, {\n              fileName: _jsxFileName,\n              lineNumber: 292,\n              columnNumber: 17\n            }, this))]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 283,\n            columnNumber: 13\n          }, this), errors.category && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"error-message\",\n            children: errors.category\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 297,\n            columnNumber: 33\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 281,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-row\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              htmlFor: \"price\",\n              children: \"Pre\\u021B (RON) *\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 302,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"number\",\n              id: \"price\",\n              name: \"price\",\n              value: formData.price,\n              onChange: handleChange,\n              placeholder: \"Ex: 150\",\n              min: \"0\",\n              step: \"1\",\n              className: errors.price ? \"error\" : \"\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 303,\n              columnNumber: 15\n            }, this), errors.price && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"error-message\",\n              children: errors.price\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 314,\n              columnNumber: 32\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 301,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              htmlFor: \"location\",\n              children: \"Loca\\u021Bie *\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 318,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              id: \"location\",\n              name: \"location\",\n              value: formData.location,\n              onChange: handleChange,\n              placeholder: \"Ex: Bucure\\u0219ti, Sector 1\",\n              className: errors.location ? \"error\" : \"\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 319,\n              columnNumber: 15\n            }, this), errors.location && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"error-message\",\n              children: errors.location\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 328,\n              columnNumber: 35\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 317,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 300,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"description\",\n            children: \"Descriere *\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 333,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n            id: \"description\",\n            name: \"description\",\n            value: formData.description,\n            onChange: handleChange,\n            placeholder: \"Descrie serviciul t\\u0103u \\xEEn detaliu. Include informa\\u021Bii despre experien\\u021Ba ta, ce ofer\\u0103 serviciul, durata, etc.\",\n            rows: \"6\",\n            className: errors.description ? \"error\" : \"\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 334,\n            columnNumber: 13\n          }, this), errors.description && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"error-message\",\n            children: errors.description\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 343,\n            columnNumber: 36\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 332,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 266,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-section\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Imagini *\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 349,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"image-upload-container\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"image-upload-area\",\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"file\",\n                id: \"images\",\n                name: \"images\",\n                onChange: handleImageChange,\n                accept: \"image/*\",\n                multiple: true,\n                className: \"image-input\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 352,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"upload-placeholder\",\n                children: [/*#__PURE__*/_jsxDEV(Upload, {\n                  size: 32\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 362,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  children: \"Trage imaginile aici sau click pentru a \\xEEnc\\u0103rca\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 363,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: \"Po\\u021Bi \\xEEnc\\u0103rca p\\xE2n\\u0103 la 5 imagini (JPG, PNG)\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 364,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 361,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 351,\n              columnNumber: 15\n            }, this), errors.images && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"error-message\",\n              children: errors.images\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 368,\n              columnNumber: 33\n            }, this), previewImages.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"image-previews\",\n              children: previewImages.map((image, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"image-preview\",\n                children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                  src: image.preview || \"/placeholder.svg\",\n                  alt: `Preview ${index + 1}`\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 374,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  type: \"button\",\n                  className: \"remove-image\",\n                  onClick: () => removeImage(index),\n                  children: /*#__PURE__*/_jsxDEV(X, {\n                    size: 16\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 376,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 375,\n                  columnNumber: 23\n                }, this)]\n              }, index, true, {\n                fileName: _jsxFileName,\n                lineNumber: 373,\n                columnNumber: 21\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 371,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 350,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 348,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-notice\",\n          children: [/*#__PURE__*/_jsxDEV(Info, {\n            size: 18\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 386,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [\"Prin postarea acestui serviciu, confirmi c\\u0103 respect\\u0103\", /*#__PURE__*/_jsxDEV(Link, {\n              to: \"/terms\",\n              className: \"notice-link\",\n              children: [\" \", \"Termenii \\u0219i Condi\\u021Biile\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 389,\n              columnNumber: 15\n            }, this), \" \", \"platformei.\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 387,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 385,\n          columnNumber: 11\n        }, this), errors.submit && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"error-message submit-error\",\n          children: errors.submit\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 397,\n          columnNumber: 29\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-actions\",\n          children: [/*#__PURE__*/_jsxDEV(Link, {\n            to: \"/\",\n            className: \"cancel-button\",\n            children: \"Anuleaz\\u0103\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 400,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"submit\",\n            className: \"submit-button\",\n            disabled: isSubmitting,\n            children: isSubmitting ? \"Se postează...\" : \"Publică serviciul\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 403,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 399,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 347,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 265,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 257,\n    columnNumber: 5\n  }, this);\n};\n_s(PostServicePage, \"dG6EeoIa0K3uCL2B4UftTtPulsY=\", false, function () {\n  return [useNavigate, useAuth];\n});\n_c = PostServicePage;\nexport default PostServicePage;\nvar _c;\n$RefreshReg$(_c, \"PostServicePage\");","map":{"version":3,"names":["_jsxFileName","_s","$RefreshSig$","useState","Link","useNavigate","ChevronLeft","Upload","X","Info","createService","useAuth","jsxDEV","_jsxDEV","CATEGORIES","PostServicePage","navigate","user","formData","setFormData","title","category","price","currency","location","description","errors","setErrors","previewImages","setPreviewImages","isSubmitting","setIsSubmitting","handleChange","e","name","value","target","handleImageChange","files","Array","from","length","images","newPreviewImages","forEach","file","reader","FileReader","onload","push","preview","result","readAsDataURL","removeImage","index","splice","newImages","validateForm","newErrors","trim","isNaN","Number","Object","keys","handleSubmit","preventDefault","firstError","document","querySelector","scrollIntoView","behavior","block","submit","token","localStorage","getItem","Error","serviceFormData","FormData","append","console","log","hasImage","response","apiError","error","message","includes","window","scrollTo","top","className","children","to","size","fileName","lineNumber","columnNumber","onSubmit","htmlFor","type","id","onChange","placeholder","map","min","step","rows","accept","multiple","image","src","alt","onClick","disabled","_c","$RefreshReg$"],"sources":["C:/Users/sabin.arsene/Desktop/Tudu-app/TUDU/frontend/src/pages/PostServicePage.jsx"],"sourcesContent":["\"use client\"\r\n\r\nimport { useState } from \"react\"\r\nimport { Link, useNavigate } from \"react-router-dom\"\r\nimport { ChevronLeft, Upload, X, Info } from \"lucide-react\"\r\nimport \"./PostServicePage.css\"\r\nimport { createService } from \"../services/serviceApi\"\r\nimport { useAuth } from \"../contexts/AuthContext\"\r\n\r\nconst CATEGORIES = [\r\n  \"Instalații\",\r\n  \"Curățenie\",\r\n  \"Mobilă\",\r\n  \"Educație\",\r\n  \"Transport\",\r\n  \"Electrocasnice\",\r\n  \"Grădinărit\",\r\n  \"IT & Tech\",\r\n  \"Design\",\r\n  \"Construcții\",\r\n  \"Sănătate\",\r\n  \"Meditații\",\r\n  \"Frumusețe\",\r\n  \"Animale\",\r\n  \"Auto\",\r\n  \"Evenimente\",\r\n]\r\n\r\nconst PostServicePage = () => {\r\n  const navigate = useNavigate()\r\n  const { user } = useAuth()\r\n\r\n  // Verificăm dacă utilizatorul este autentificat\r\n  if (!user) {\r\n    navigate(\"/login\")\r\n  }\r\n\r\n  const [formData, setFormData] = useState({\r\n    title: \"\",\r\n    category: \"\",\r\n    price: \"\",\r\n    currency: \"RON\",\r\n    location: \"\",\r\n    description: \"\",\r\n  })\r\n\r\n  const [errors, setErrors] = useState({})\r\n  const [previewImages, setPreviewImages] = useState([])\r\n  const [isSubmitting, setIsSubmitting] = useState(false)\r\n\r\n  const handleChange = (e) => {\r\n    const { name, value } = e.target\r\n\r\n    setFormData({\r\n      ...formData,\r\n      [name]: value,\r\n    })\r\n\r\n    // Clear error when field is edited\r\n    if (errors[name]) {\r\n      setErrors({\r\n        ...errors,\r\n        [name]: null,\r\n      })\r\n    }\r\n  }\r\n\r\n  const handleImageChange = (e) => {\r\n    const files = Array.from(e.target.files)\r\n\r\n    if (files.length + previewImages.length > 5) {\r\n      setErrors({\r\n        ...errors,\r\n        images: \"Poți încărca maximum 5 imagini\",\r\n      })\r\n      return\r\n    }\r\n\r\n    const newPreviewImages = [...previewImages]\r\n\r\n    files.forEach((file) => {\r\n      const reader = new FileReader()\r\n      reader.onload = (e) => {\r\n        newPreviewImages.push({\r\n          file,\r\n          preview: e.target.result,\r\n        })\r\n        setPreviewImages([...newPreviewImages])\r\n      }\r\n      reader.readAsDataURL(file)\r\n    })\r\n\r\n    setFormData({\r\n      ...formData,\r\n      images: [...(formData.images || []), ...files],\r\n    })\r\n\r\n    // Clear error when images are added\r\n    if (errors.images) {\r\n      setErrors({\r\n        ...errors,\r\n        images: null,\r\n      })\r\n    }\r\n  }\r\n\r\n  const removeImage = (index) => {\r\n    const newPreviewImages = [...previewImages]\r\n    newPreviewImages.splice(index, 1)\r\n    setPreviewImages(newPreviewImages)\r\n\r\n    // Also remove from formData\r\n    const newImages = [...(formData.images || [])]\r\n    newImages.splice(index, 1)\r\n    setFormData({\r\n      ...formData,\r\n      images: newImages,\r\n    })\r\n  }\r\n\r\n  const validateForm = () => {\r\n    const newErrors = {}\r\n\r\n    if (!formData.title.trim()) {\r\n      newErrors.title = \"Titlul este obligatoriu\"\r\n    } else if (formData.title.length < 5) {\r\n      newErrors.title = \"Titlul trebuie să aibă cel puțin 5 caractere\"\r\n    }\r\n\r\n    if (!formData.category) {\r\n      newErrors.category = \"Categoria este obligatorie\"\r\n    }\r\n\r\n    if (!formData.price) {\r\n      newErrors.price = \"Prețul este obligatoriu\"\r\n    } else if (isNaN(formData.price) || Number(formData.price) <= 0) {\r\n      newErrors.price = \"Prețul trebuie să fie un număr pozitiv\"\r\n    }\r\n\r\n    if (!formData.location.trim()) {\r\n      newErrors.location = \"Locația este obligatorie\"\r\n    }\r\n\r\n    if (!formData.description.trim()) {\r\n      newErrors.description = \"Descrierea este obligatorie\"\r\n    } else if (formData.description.length < 20) {\r\n      newErrors.description = \"Descrierea trebuie să aibă cel puțin 20 de caractere\"\r\n    }\r\n\r\n    if (!previewImages.length) {\r\n      newErrors.images = \"Trebuie să încarci cel puțin o imagine\"\r\n    }\r\n\r\n    setErrors(newErrors)\r\n    return Object.keys(newErrors).length === 0\r\n  }\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault()\r\n\r\n    if (!validateForm()) {\r\n      // Scroll to the first error\r\n      const firstError = document.querySelector(\".error-message\")\r\n      if (firstError) {\r\n        firstError.scrollIntoView({ behavior: \"smooth\", block: \"center\" })\r\n      }\r\n      return\r\n    }\r\n\r\n    setIsSubmitting(true)\r\n    setErrors({ ...errors, submit: null })\r\n\r\n    try {\r\n      // Get token from localStorage\r\n      const token = localStorage.getItem('token')\r\n      \r\n      if (!token) {\r\n        throw new Error('Nu ești autentificat')\r\n      }\r\n\r\n      // Create FormData object for the API call\r\n      const serviceFormData = new FormData()\r\n      serviceFormData.append('title', formData.title)\r\n      serviceFormData.append('category', formData.category)\r\n      serviceFormData.append('price', formData.price)\r\n      serviceFormData.append('currency', formData.currency)\r\n      serviceFormData.append('location', formData.location)\r\n      serviceFormData.append('description', formData.description)\r\n      \r\n      // Append image - only the first one since backend only supports one image\r\n      if (formData.images && formData.images.length > 0) {\r\n        serviceFormData.append('image', formData.images[0])\r\n        console.log(\"Appending image:\", formData.images[0].name)\r\n      } else {\r\n        console.log(\"No image to append\")\r\n      }\r\n\r\n      console.log(\"Submitting service with data:\", {\r\n        title: formData.title,\r\n        category: formData.category,\r\n        price: formData.price,\r\n        hasImage: formData.images && formData.images.length > 0\r\n      })\r\n\r\n      try {\r\n        // Call the API to create the service\r\n        const response = await createService(serviceFormData, token)\r\n        \r\n        console.log(\"Service created:\", response)\r\n  \r\n        // Redirect to success page\r\n        navigate(\"/success?type=service\")\r\n      } catch (apiError) {\r\n        console.error(\"API error posting service:\", apiError)\r\n        \r\n        // Verificăm dacă eroarea este legată de încărcarea imaginii\r\n        if (apiError.message && apiError.message.includes('image')) {\r\n          setErrors({\r\n            ...errors,\r\n            images: \"Eroare la încărcarea imaginii. Serviciul nu a putut fi creat.\",\r\n            submit: `Eroare: ${apiError.message}`\r\n          })\r\n        } else {\r\n          setErrors({\r\n            ...errors,\r\n            submit: `Eroare: ${apiError.message || 'A apărut o eroare la crearea serviciului. Te rugăm să încerci din nou.'}`\r\n          })\r\n        }\r\n        \r\n        // Scroll to the top to show the error\r\n        window.scrollTo({ top: 0, behavior: 'smooth' })\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Error posting service:\", error)\r\n      \r\n      // Afișăm un mesaj de eroare mai specific dacă este disponibil\r\n      if (error.message) {\r\n        setErrors({\r\n          ...errors,\r\n          submit: `Eroare: ${error.message}`,\r\n        })\r\n      } else {\r\n        setErrors({\r\n          ...errors,\r\n          submit: \"A apărut o eroare. Te rugăm să încerci din nou.\",\r\n        })\r\n      }\r\n      \r\n      // Scroll to the top to show the error\r\n      window.scrollTo({ top: 0, behavior: 'smooth' })\r\n    } finally {\r\n      setIsSubmitting(false)\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"post-service-page\">\r\n      <header className=\"page-header\">\r\n        <Link to=\"/\" className=\"back-button\">\r\n          <ChevronLeft size={24} />\r\n        </Link>\r\n        <h1>Adaugă un serviciu nou</h1>\r\n      </header>\r\n\r\n      <form className=\"service-form\" onSubmit={handleSubmit}>\r\n        <div className=\"form-section\">\r\n          <div className=\"form-group\">\r\n            <label htmlFor=\"title\">Titlul serviciului *</label>\r\n            <input\r\n              type=\"text\"\r\n              id=\"title\"\r\n              name=\"title\"\r\n              value={formData.title}\r\n              onChange={handleChange}\r\n              placeholder=\"Ex: Reparații instalații sanitare\"\r\n              className={errors.title ? \"error\" : \"\"}\r\n            />\r\n            {errors.title && <div className=\"error-message\">{errors.title}</div>}\r\n          </div>\r\n\r\n          <div className=\"form-group\">\r\n            <label htmlFor=\"category\">Categoria *</label>\r\n            <select\r\n              id=\"category\"\r\n              name=\"category\"\r\n              value={formData.category}\r\n              onChange={handleChange}\r\n              className={errors.category ? \"error\" : \"\"}\r\n            >\r\n              <option value=\"\">Selectează o categorie</option>\r\n              {CATEGORIES.map((category) => (\r\n                <option key={category} value={category}>\r\n                  {category}\r\n                </option>\r\n              ))}\r\n            </select>\r\n            {errors.category && <div className=\"error-message\">{errors.category}</div>}\r\n          </div>\r\n\r\n          <div className=\"form-row\">\r\n            <div className=\"form-group\">\r\n              <label htmlFor=\"price\">Preț (RON) *</label>\r\n              <input\r\n                type=\"number\"\r\n                id=\"price\"\r\n                name=\"price\"\r\n                value={formData.price}\r\n                onChange={handleChange}\r\n                placeholder=\"Ex: 150\"\r\n                min=\"0\"\r\n                step=\"1\"\r\n                className={errors.price ? \"error\" : \"\"}\r\n              />\r\n              {errors.price && <div className=\"error-message\">{errors.price}</div>}\r\n            </div>\r\n\r\n            <div className=\"form-group\">\r\n              <label htmlFor=\"location\">Locație *</label>\r\n              <input\r\n                type=\"text\"\r\n                id=\"location\"\r\n                name=\"location\"\r\n                value={formData.location}\r\n                onChange={handleChange}\r\n                placeholder=\"Ex: București, Sector 1\"\r\n                className={errors.location ? \"error\" : \"\"}\r\n              />\r\n              {errors.location && <div className=\"error-message\">{errors.location}</div>}\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"form-group\">\r\n            <label htmlFor=\"description\">Descriere *</label>\r\n            <textarea\r\n              id=\"description\"\r\n              name=\"description\"\r\n              value={formData.description}\r\n              onChange={handleChange}\r\n              placeholder=\"Descrie serviciul tău în detaliu. Include informații despre experiența ta, ce oferă serviciul, durata, etc.\"\r\n              rows=\"6\"\r\n              className={errors.description ? \"error\" : \"\"}\r\n            ></textarea>\r\n            {errors.description && <div className=\"error-message\">{errors.description}</div>}\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"form-section\">\r\n          <div className=\"form-group\">\r\n            <label>Imagini *</label>\r\n            <div className=\"image-upload-container\">\r\n              <div className=\"image-upload-area\">\r\n                <input\r\n                  type=\"file\"\r\n                  id=\"images\"\r\n                  name=\"images\"\r\n                  onChange={handleImageChange}\r\n                  accept=\"image/*\"\r\n                  multiple\r\n                  className=\"image-input\"\r\n                />\r\n                <div className=\"upload-placeholder\">\r\n                  <Upload size={32} />\r\n                  <p>Trage imaginile aici sau click pentru a încărca</p>\r\n                  <span>Poți încărca până la 5 imagini (JPG, PNG)</span>\r\n                </div>\r\n              </div>\r\n\r\n              {errors.images && <div className=\"error-message\">{errors.images}</div>}\r\n\r\n              {previewImages.length > 0 && (\r\n                <div className=\"image-previews\">\r\n                  {previewImages.map((image, index) => (\r\n                    <div key={index} className=\"image-preview\">\r\n                      <img src={image.preview || \"/placeholder.svg\"} alt={`Preview ${index + 1}`} />\r\n                      <button type=\"button\" className=\"remove-image\" onClick={() => removeImage(index)}>\r\n                        <X size={16} />\r\n                      </button>\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              )}\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"form-notice\">\r\n            <Info size={18} />\r\n            <p>\r\n              Prin postarea acestui serviciu, confirmi că respectă\r\n              <Link to=\"/terms\" className=\"notice-link\">\r\n                {\" \"}\r\n                Termenii și Condițiile\r\n              </Link>{\" \"}\r\n              platformei.\r\n            </p>\r\n          </div>\r\n\r\n          {errors.submit && <div className=\"error-message submit-error\">{errors.submit}</div>}\r\n\r\n          <div className=\"form-actions\">\r\n            <Link to=\"/\" className=\"cancel-button\">\r\n              Anulează\r\n            </Link>\r\n            <button type=\"submit\" className=\"submit-button\" disabled={isSubmitting}>\r\n              {isSubmitting ? \"Se postează...\" : \"Publică serviciul\"}\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default PostServicePage\r\n\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}