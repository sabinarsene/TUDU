{"ast":null,"code":"import { API_BASE_URL } from '../config/api';\nimport defaultProfileImage from '../assets/default-profile.jpg';\n\n/**\r\n * Get the full URL for an image path\r\n * @param {string} path - The relative path to the image\r\n * @returns {string} The full URL to the image\r\n */\nexport const getImageUrl = path => {\n  console.log(\"getImageUrl called with:\", path);\n  if (!path) {\n    console.log(\"No path provided, returning default\");\n    return defaultProfileImage;\n  }\n  if (path.startsWith('blob:')) {\n    console.log(\"Blob URL detected:\", path);\n    return path;\n  }\n  if (path.startsWith('http')) {\n    console.log(\"Full HTTP URL detected:\", path);\n    return path;\n  }\n\n  // Make sure API_BASE_URL doesn't end with a slash\n  const baseUrl = API_BASE_URL.endsWith('/') ? API_BASE_URL.slice(0, -1) : API_BASE_URL;\n\n  // If the path includes uploads or is an absolute path\n  if (path.includes('/uploads/') || path.startsWith('/')) {\n    // Make sure path starts with /\n    const normalizedPath = path.startsWith('/') ? path : `/${path}`;\n    const fullUrl = `${baseUrl}${normalizedPath}`;\n    console.log(\"Server relative path, full URL:\", fullUrl);\n    return fullUrl;\n  }\n\n  // Default case for other paths\n  const fullUrl = `${baseUrl}/${path}`;\n  console.log(\"Generated URL:\", fullUrl);\n  return fullUrl;\n};\n\n/**\r\n * Get the full URL for a profile image\r\n * @param {string|Object} pathOrUser - The relative path to the profile image or user object\r\n * @returns {string|null} The full URL to the profile image or null if no image exists\r\n */\nexport const getProfileImageUrl = pathOrUser => {\n  // If it's a user object, extract the profile image path\n  if (pathOrUser && typeof pathOrUser === 'object') {\n    // Check all possible property names for profile images\n    // Backend uses profile_image, but frontend might transform it to profileImage\n    const imagePath = pathOrUser.profile_image || pathOrUser.profileImage || pathOrUser.image;\n    console.log(\"getProfileImageUrl input:\", pathOrUser);\n    console.log(\"getProfileImageUrl extracted path:\", imagePath);\n\n    // Return null if no image exists, so components can display initials instead\n    if (!imagePath) return null;\n    return getImageUrl(imagePath);\n  }\n\n  // If it's a string path but empty, return null\n  if (!pathOrUser) return null;\n\n  // If it's a string path\n  return getImageUrl(pathOrUser);\n};\n\n/**\r\n * Handle image loading errors by setting a default avatar\r\n * @param {Event} e - The error event\r\n */\nexport const handleImageError = e => {\n  e.target.src = defaultProfileImage;\n};","map":{"version":3,"names":["API_BASE_URL","defaultProfileImage","getImageUrl","path","console","log","startsWith","baseUrl","endsWith","slice","includes","normalizedPath","fullUrl","getProfileImageUrl","pathOrUser","imagePath","profile_image","profileImage","image","handleImageError","e","target","src"],"sources":["C:/Users/sabin.arsene/Desktop/TUDU-app/TUDU/frontend/src/utils/imageUtils.js"],"sourcesContent":["import { API_BASE_URL } from '../config/api';\r\nimport defaultProfileImage from '../assets/default-profile.jpg';\r\n\r\n/**\r\n * Get the full URL for an image path\r\n * @param {string} path - The relative path to the image\r\n * @returns {string} The full URL to the image\r\n */\r\nexport const getImageUrl = (path) => {\r\n  console.log(\"getImageUrl called with:\", path);\r\n  \r\n  if (!path) {\r\n    console.log(\"No path provided, returning default\");\r\n    return defaultProfileImage;\r\n  }\r\n  \r\n  if (path.startsWith('blob:')) {\r\n    console.log(\"Blob URL detected:\", path);\r\n    return path;\r\n  }\r\n  \r\n  if (path.startsWith('http')) {\r\n    console.log(\"Full HTTP URL detected:\", path);\r\n    return path;\r\n  }\r\n  \r\n  // Make sure API_BASE_URL doesn't end with a slash\r\n  const baseUrl = API_BASE_URL.endsWith('/') ? API_BASE_URL.slice(0, -1) : API_BASE_URL;\r\n  \r\n  // If the path includes uploads or is an absolute path\r\n  if (path.includes('/uploads/') || path.startsWith('/')) {\r\n    // Make sure path starts with /\r\n    const normalizedPath = path.startsWith('/') ? path : `/${path}`;\r\n    const fullUrl = `${baseUrl}${normalizedPath}`;\r\n    console.log(\"Server relative path, full URL:\", fullUrl);\r\n    return fullUrl;\r\n  }\r\n  \r\n  // Default case for other paths\r\n  const fullUrl = `${baseUrl}/${path}`;\r\n  console.log(\"Generated URL:\", fullUrl);\r\n  return fullUrl;\r\n};\r\n\r\n/**\r\n * Get the full URL for a profile image\r\n * @param {string|Object} pathOrUser - The relative path to the profile image or user object\r\n * @returns {string|null} The full URL to the profile image or null if no image exists\r\n */\r\nexport const getProfileImageUrl = (pathOrUser) => {\r\n  // If it's a user object, extract the profile image path\r\n  if (pathOrUser && typeof pathOrUser === 'object') {\r\n    // Check all possible property names for profile images\r\n    // Backend uses profile_image, but frontend might transform it to profileImage\r\n    const imagePath = \r\n      pathOrUser.profile_image || \r\n      pathOrUser.profileImage || \r\n      pathOrUser.image;\r\n    \r\n    console.log(\"getProfileImageUrl input:\", pathOrUser);\r\n    console.log(\"getProfileImageUrl extracted path:\", imagePath);\r\n    \r\n    // Return null if no image exists, so components can display initials instead\r\n    if (!imagePath) return null;\r\n    \r\n    return getImageUrl(imagePath);\r\n  }\r\n  \r\n  // If it's a string path but empty, return null\r\n  if (!pathOrUser) return null;\r\n  \r\n  // If it's a string path\r\n  return getImageUrl(pathOrUser);\r\n};\r\n\r\n/**\r\n * Handle image loading errors by setting a default avatar\r\n * @param {Event} e - The error event\r\n */\r\nexport const handleImageError = (e) => {\r\n  e.target.src = defaultProfileImage;\r\n}; "],"mappings":"AAAA,SAASA,YAAY,QAAQ,eAAe;AAC5C,OAAOC,mBAAmB,MAAM,+BAA+B;;AAE/D;AACA;AACA;AACA;AACA;AACA,OAAO,MAAMC,WAAW,GAAIC,IAAI,IAAK;EACnCC,OAAO,CAACC,GAAG,CAAC,0BAA0B,EAAEF,IAAI,CAAC;EAE7C,IAAI,CAACA,IAAI,EAAE;IACTC,OAAO,CAACC,GAAG,CAAC,qCAAqC,CAAC;IAClD,OAAOJ,mBAAmB;EAC5B;EAEA,IAAIE,IAAI,CAACG,UAAU,CAAC,OAAO,CAAC,EAAE;IAC5BF,OAAO,CAACC,GAAG,CAAC,oBAAoB,EAAEF,IAAI,CAAC;IACvC,OAAOA,IAAI;EACb;EAEA,IAAIA,IAAI,CAACG,UAAU,CAAC,MAAM,CAAC,EAAE;IAC3BF,OAAO,CAACC,GAAG,CAAC,yBAAyB,EAAEF,IAAI,CAAC;IAC5C,OAAOA,IAAI;EACb;;EAEA;EACA,MAAMI,OAAO,GAAGP,YAAY,CAACQ,QAAQ,CAAC,GAAG,CAAC,GAAGR,YAAY,CAACS,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,GAAGT,YAAY;;EAErF;EACA,IAAIG,IAAI,CAACO,QAAQ,CAAC,WAAW,CAAC,IAAIP,IAAI,CAACG,UAAU,CAAC,GAAG,CAAC,EAAE;IACtD;IACA,MAAMK,cAAc,GAAGR,IAAI,CAACG,UAAU,CAAC,GAAG,CAAC,GAAGH,IAAI,GAAG,IAAIA,IAAI,EAAE;IAC/D,MAAMS,OAAO,GAAG,GAAGL,OAAO,GAAGI,cAAc,EAAE;IAC7CP,OAAO,CAACC,GAAG,CAAC,iCAAiC,EAAEO,OAAO,CAAC;IACvD,OAAOA,OAAO;EAChB;;EAEA;EACA,MAAMA,OAAO,GAAG,GAAGL,OAAO,IAAIJ,IAAI,EAAE;EACpCC,OAAO,CAACC,GAAG,CAAC,gBAAgB,EAAEO,OAAO,CAAC;EACtC,OAAOA,OAAO;AAChB,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA,OAAO,MAAMC,kBAAkB,GAAIC,UAAU,IAAK;EAChD;EACA,IAAIA,UAAU,IAAI,OAAOA,UAAU,KAAK,QAAQ,EAAE;IAChD;IACA;IACA,MAAMC,SAAS,GACbD,UAAU,CAACE,aAAa,IACxBF,UAAU,CAACG,YAAY,IACvBH,UAAU,CAACI,KAAK;IAElBd,OAAO,CAACC,GAAG,CAAC,2BAA2B,EAAES,UAAU,CAAC;IACpDV,OAAO,CAACC,GAAG,CAAC,oCAAoC,EAAEU,SAAS,CAAC;;IAE5D;IACA,IAAI,CAACA,SAAS,EAAE,OAAO,IAAI;IAE3B,OAAOb,WAAW,CAACa,SAAS,CAAC;EAC/B;;EAEA;EACA,IAAI,CAACD,UAAU,EAAE,OAAO,IAAI;;EAE5B;EACA,OAAOZ,WAAW,CAACY,UAAU,CAAC;AAChC,CAAC;;AAED;AACA;AACA;AACA;AACA,OAAO,MAAMK,gBAAgB,GAAIC,CAAC,IAAK;EACrCA,CAAC,CAACC,MAAM,CAACC,GAAG,GAAGrB,mBAAmB;AACpC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}